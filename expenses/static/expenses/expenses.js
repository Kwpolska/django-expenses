!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";t.__esModule=!0,t.getNewAIDForSelector=function(e){var t=document.querySelector(e),n=parseInt(t.dataset.last_aid)+1;return t.dataset.last_aid=n.toString(),n},t.getTrForEvent=function(e){return e.target.closest("tr")}},function(e,t,n){"use strict";t.__esModule=!0;
/*!
 * Expenses Scripting Enhancements
 * Copyright © 2018, Chris Warrick. All rights reserved. License: 3-clause BSD.
 */
var a=n(2),r=n(3),l=n(4);document.addEventListener("DOMContentLoaded",function(){if(l.default(),null!==document.querySelector("#expenses-billtable-form")&&a.default(),null!==document.querySelector("#expenses-bulkcatedit-form")&&r.default(),-1!=navigator.userAgent.indexOf("ExpensesWebView")){var e=document.querySelector(".navbar-kw");e.classList.remove("static-top"),e.classList.add("fixed-top"),document.querySelector("body").style.paddingTop="50px"}},!1)},function(e,t,n){"use strict";
/*!
 * Expenses Bill Editor
 * Copyright © 2018, Chris Warrick. All rights reserved. License: 3-clause BSD.
 */t.__esModule=!0;var a=n(0),r=["expenses-billtable-serving","expenses-billtable-count","expenses-billtable-unitprice"];function l(e){return isNaN(e)?l(0):new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN"}).format(e)}function o(e){!function(e){var t=e.getElementsByClassName("expenses-billtable-unitprice")[0],n=e.getElementsByClassName("expenses-billtable-count")[0],a=t.getElementsByTagName("input")[0],r=n.getElementsByTagName("input")[0],o=e.getElementsByClassName("expenses-billtable-amount")[0],i=parseFloat(a.value)*parseFloat(r.value);o.innerText=l(i),o.dataset.value=i.toString(),s()}(a.getTrForEvent(e))}function s(){for(var e=document.querySelectorAll("td.expenses-billtable-amount"),t=0,n=0;n<e.length;n++){var a=parseFloat(e[n].dataset.value);isNaN(a)||(t+=a)}document.querySelector(".expenses-bill-total").innerText=l(t)}function i(){document.querySelector("#expenses-billtable-savechanges").disabled=!1}function u(e){var t={edit:{classNames:"btn-info expenses-billtable-btn-edit",title:"Edit",icon:"fa-edit",callback:p},undo:{classNames:"btn-warning expenses-billtable-btn-undo",title:"Undo Changes",icon:"fa-undo",callback:f},delete:{classNames:"btn-danger expenses-billtable-btn-delete",title:"Delete",icon:"fa-trash-alt",callback:m},accept:{classNames:"btn-success expenses-billtable-btn-accept",title:"Accept",icon:"fa-check",callback:b}};return function(e){var t=document.createElement("div");return t.className="btn-group",t.setAttribute("role","group"),t.setAttribute("aria-label","Item actions"),e.forEach(function(e){var n=document.createElement("button");n.type="button",n.className="btn "+e.classNames,n.title=e.title,n.innerHTML='<i class="fa fa-fw '+e.icon+'"></i>',n.addEventListener("click",e.callback),t.appendChild(n)}),t}(e.map(function(e){return t[e]}))}function c(e){var t=document.querySelector("#expenses-billtable-addrow"),n=document.createElement("tr");n.classList.add("expenses-billtable-row","table-success");var r="a"+a.getNewAIDForSelector("#expenses-billtable-form");n.dataset.id=r,d(n,t,r,"add",["edit","delete"]),t.getElementsByClassName("expenses-billtable-amount")[0].innerText=l(0),document.querySelector("#expenses-billtable tbody").insertBefore(n,t),t.querySelectorAll("input").forEach(function(e){void 0!==e.dataset.default?e.value=e.dataset.default:e.value=""}),i()}function d(e,t,n,a,o){e.dataset.type=a;for(var s=t.querySelectorAll("input"),i={},c=0;c<s.length;c++){var d=s[c];if(!d.reportValidity())throw new Error("Field "+d.name+" was invalid.");var p=document.createElement("td"),m=d.parentElement;m.dataset.hasOwnProperty("orig_text")&&(p.dataset.orig_text=m.dataset.orig_text,p.dataset.orig_value=m.dataset.orig_value),p.className=d.parentElement.className;var f=document.createElement("input");f.hidden=!0,f.value=d.value;var b=d.name;-1==b.indexOf("__")?f.name=n+"__"+b:f.name=b,p.appendChild(f);var v=d.value;"expenses-billtable-unitprice"==p.className&&(v=l(parseFloat(d.value)),p.dataset.value=d.value),p.appendChild(document.createTextNode(v)),e.appendChild(p),-1!=r.indexOf(p.className)?i[d.name]=parseFloat(d.value):i[d.name]=d.value}var h=t.getElementsByClassName("expenses-billtable-amount")[0],y=document.createElement("td");y.className="expenses-billtable-amount",y.innerText=h.innerText,h.dataset.hasOwnProperty("orig_text")&&(y.dataset.orig_text=h.dataset.orig_text,y.dataset.orig_value=h.dataset.orig_value),e.appendChild(y);var g=document.createElement("td");g.className="expenses-billtable-actions",g.innerHTML="",g.appendChild(u(o)),e.appendChild(g)}function p(e){for(var t=a.getTrForEvent(e),n=document.querySelector("#expenses-billtable-addrow"),r=0;r<t.children.length;r++){var l=t.children[r];if("expenses-billtable-actions"!=l.className){var s=l.getElementsByTagName("input"),c="";c=s.length>0?s[0].value:l.dataset.value?l.dataset.value:l.innerText.trim(),l.dataset.hasOwnProperty("orig_text")||(l.dataset.orig_text=l.innerText.trim(),l.dataset.orig_value=c.trim());var d=n.querySelector("."+l.className+" input");if(null!==d){var p=d.cloneNode(),m=p.name;p.value=c,p.name=t.dataset.id+"__"+m,"count"!=m&&"unit_price"!=m||p.addEventListener("input",o),p.addEventListener("keypress",y),l.innerHTML="",l.appendChild(p)}}else l.innerHTML="",l.appendChild(u(["accept","undo"]))}i(),e.preventDefault()}function m(e){var t=a.getTrForEvent(e),n=t.dataset.id;if("add"!==t.dataset.type){var r=document.querySelector("#expenses-billtable-deletions"),l=document.createElement("input");l.hidden=!0,l.name="d__"+n,r.appendChild(l)}t.remove(),s(),i(),e.preventDefault()}function f(e){var t=a.getTrForEvent(e);t.classList.remove("table-info"),t.querySelectorAll("td").forEach(function(e){e.dataset.hasOwnProperty("orig_text")&&(e.innerText=e.dataset.orig_text,e.dataset.value=e.dataset.orig_value),"expenses-billtable-actions"==e.className&&(e.innerHTML="",e.appendChild(u(["edit","delete"])))}),s(),e.preventDefault()}function b(e){v(a.getTrForEvent(e))}function v(e){var t=e.dataset.id,n=document.createElement("tr");n.classList.add("expenses-billtable-row","table-info"),n.dataset.id=t,d(n,e,t,function(e){return"a"==e.charAt(0)}(t)?"add":"edit",["edit","undo","delete"]),e.parentElement.replaceChild(n,e)}function h(){var e=document.querySelector("#expenses-billtable-addrow").querySelectorAll("input");e.forEach(function(e){return e.disabled=!0});try{document.querySelectorAll(".expenses-billtable-btn-accept").forEach(function(e){return v(e.closest("tr"))}),document.querySelector("#expenses-billtable-form").submit()}catch(t){e.forEach(function(e){return e.disabled=!1}),event.preventDefault()}}function y(e){if(13==e.keyCode){var t=a.getTrForEvent(e);return"expenses-billtable-addrow"===t.id?c():v(t),!1}}t.default=function(){var e=document.querySelector("#expenses-billtable-btn-add");e.type="button",e.addEventListener("click",c),document.querySelectorAll(".expenses-billtable-btn-edit").forEach(function(e){return e.addEventListener("click",p)}),document.querySelectorAll(".expenses-billtable-btn-delete").forEach(function(e){return e.addEventListener("click",m)}),document.querySelector("#expenses-billtable-addrow .expenses-billtable-unitprice .form-control").addEventListener("input",o),document.querySelector("#expenses-billtable-addrow .expenses-billtable-count .form-control").addEventListener("input",o),document.querySelector("#expenses-billtable-addrow .expenses-billtable-amount").innerText=l(0),document.querySelectorAll("#expenses-billtable-addrow input").forEach(function(e){return e.addEventListener("keypress",y)}),document.querySelector("#expenses-billtable-savechanges").addEventListener("click",h);var t=document.querySelector("#expenses-billtable-form");t.action="",t.dataset.last_aid="0"}},function(e,t,n){"use strict";
/*!
 * Expenses Bulk Category Editor
 * Copyright © 2018, Chris Warrick. All rights reserved. License: 3-clause BSD.
 */t.__esModule=!0;var a=n(0);function r(e){var t=document.querySelector("#expenses-bulkcatedit-addrow"),n=document.createElement("tr");n.classList.add("table-success");for(var r="a"+a.getNewAIDForSelector("#expenses-bulkcatedit-form"),o=t.querySelectorAll("input"),i=0;i<o.length;i++){var u=o[i];if(!u.reportValidity())throw new Error("Field "+u.name+" was invalid.");var c=document.createElement("td");c.className=u.closest("td").className;var d=u.cloneNode();d.name=d.name.replace("add_","add_"+r+"_"),d.addEventListener("keypress",s),c.appendChild(d),n.appendChild(c)}var p=document.createElement("td");p.className="expenses-bulkcatedit-actions";var m=document.createElement("btn");m.className="btn btn-danger",m.innerHTML='<i class="fa fa-fw fa-trash-alt"></i>',m.addEventListener("click",l),p.appendChild(m),n.appendChild(p),document.querySelector("#expenses-bulkcatedit-form tbody").insertBefore(n,t),o.forEach(function(e){return e.value=""})}function l(e){a.getTrForEvent(e).remove()}function o(e){document.querySelectorAll("#expenses-bulkcatedit-addrow input").forEach(function(e){return e.disabled=!0});var t=document.querySelector("#expenses-bulkcatedit-form");t.reportValidity()?t.submit():document.querySelectorAll("#expenses-bulkcatedit-addrow input").forEach(function(e){return e.disabled=!1}),null!==e&&e.preventDefault()}function s(e){if(13==e.keyCode){if("expenses-bulkcatedit-addrow"===a.getTrForEvent(e).id){var t=document.querySelector("#expenses-bulkcatedit-addrow").querySelectorAll("input");""===t[0].value&&""===t[1].value?o(null):r()}else o(null);return!1}}t.default=function(){var e=document.querySelector("#expenses-bulkcatedit-btn-add");e.type="button",e.addEventListener("click",r),document.querySelectorAll("#expenses-bulkcatedit-addrow input").forEach(function(e){e.disabled=!1,e.addEventListener("keypress",s)}),document.querySelectorAll("#expenses-bulkcatedit-addrow input").forEach(function(e){return e.addEventListener("keypress",s)});var t=document.querySelector("#expenses-bulkcatedit-btn-save");t.type="button",t.addEventListener("click",o),document.querySelector("#expenses-bulkcatedit-form").dataset.last_aid="0"}},function(e,t,n){"use strict";t.__esModule=!0;
/*!
 * Expenses AutoComplete registration
 * Copyright © 2018, Chris Warrick. All rights reserved. License: 3-clause BSD.
 */
var a=n(5);t.default=function(){a({Url:"/expenses/api/autocomplete/expense/vendor/"},".expenses-addform-vendor"),a({Url:"/expenses/api/autocomplete/bill/vendor/"},".expenses-billaddform-vendor"),a({_Url:function(){var e=document.querySelector(".expenses-addform-vendor").value.trim();return 0==e.length?"/expenses/api/autocomplete/expense/description/":"/expenses/api/autocomplete/expense/description/?vendor="+encodeURIComponent(e)}},".expenses-addform-description")}},function(e,t,n){var a;e.exports=function e(t,n,r){function l(s,i){if(!n[s]){if(!t[s]){var u="function"==typeof a&&a;if(!i&&u)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return l(n||e)},d,d.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof a&&a,s=0;s<r.length;s++)l(r[s]);return l}({1:[function(e,t,n){
/*
 * @license MIT
 *
 * Autocomplete.js v2.7.1
 * Developed by Baptiste Donaux
 * http://autocomplete-js.com
 *
 * (c) 2017, Baptiste Donaux
 */
"use strict";var a,r;!function(e){e[e.AND=0]="AND",e[e.OR=1]="OR"}(a||(a={})),function(e){e[e.KEYDOWN=0]="KEYDOWN",e[e.KEYUP=1]="KEYUP"}(r||(r={}));var l=function(){function e(t,n){if(void 0===t&&(t={}),void 0===n&&(n="[data-autocomplete]"),Array.isArray(n))n.forEach(function(n){new e(t,n)});else{if("string"!=typeof n){var a=e.merge(e.defaults,t,{DOMResults:document.createElement("div")});return e.prototype.create(a,n),a}var r=document.querySelectorAll(n);Array.prototype.forEach.call(r,function(n){new e(t,n)})}}return e.prototype.create=function(t,n){if(t.Input=n,t.Input.nodeName.match(/^INPUT$/i)&&(!1===t.Input.hasAttribute("type")||t.Input.getAttribute("type").match(/^TEXT|SEARCH$/i)))for(var a in t.Input.setAttribute("autocomplete","off"),t._Position(t),t.Input.parentNode.appendChild(t.DOMResults),t.$Listeners={blur:t._Blur.bind(t),destroy:e.prototype.destroy.bind(null,t),focus:t._Focus.bind(t),keyup:e.prototype.event.bind(null,t,r.KEYUP),keydown:e.prototype.event.bind(null,t,r.KEYDOWN),position:t._Position.bind(t)},t.$Listeners)t.Input.addEventListener(a,t.$Listeners[a])},e.prototype.getEventsByType=function(e,t){var n={};for(var a in e.KeyboardMappings){var l=r.KEYUP;void 0!==e.KeyboardMappings[a].Event&&(l=e.KeyboardMappings[a].Event),l==t&&(n[a]=e.KeyboardMappings[a])}return n},e.prototype.event=function(t,n,r){var l=function(t){(!0===i&&s.Operator==a.AND||!1===i&&s.Operator==a.OR)&&((t=e.merge({Not:!1},t)).hasOwnProperty("Is")?i=t.Is==r.keyCode?!t.Not:t.Not:t.hasOwnProperty("From")&&t.hasOwnProperty("To")&&(i=r.keyCode>=t.From&&r.keyCode<=t.To?!t.Not:t.Not))};for(var o in e.prototype.getEventsByType(t,n)){var s=e.merge({Operator:a.AND},t.KeyboardMappings[o]),i=a.AND==s.Operator;s.Conditions.forEach(l),!0===i&&s.Callback.call(t,r)}},e.prototype.makeRequest=function(e,t,n){var a=Object.getOwnPropertyNames(e.HttpHeaders),r=new XMLHttpRequest,l=e._HttpMethod(),o=e._Url(),s=e._Pre(),i=encodeURIComponent(e._QueryArg())+"="+encodeURIComponent(s);l.match(/^GET$/i)&&(-1!==o.indexOf("?")?o+="&"+i:o+="?"+i),r.open(l,o,!0);for(var u=a.length-1;u>=0;u--)r.setRequestHeader(a[u],e.HttpHeaders[a[u]]);return r.onreadystatechange=function(){4==r.readyState&&200==r.status?(e.$Cache[s]=r.response,t(r.response)):r.status>=400&&n()},r},e.prototype.ajax=function(t,n,a){void 0===a&&(a=!0),t.$AjaxTimer&&window.clearTimeout(t.$AjaxTimer),!0===a?t.$AjaxTimer=window.setTimeout(e.prototype.ajax.bind(null,t,n,!1),t.Delay):(t.Request&&t.Request.abort(),t.Request=n,t.Request.send(t._QueryArg()+"="+t._Pre()))},e.prototype.cache=function(t,n,a){var r=t._Cache(t._Pre());if(void 0===r){var l=e.prototype.makeRequest(t,n,a);e.prototype.ajax(t,l)}else n(r)},e.prototype.destroy=function(e){for(var t in e.$Listeners)e.Input.removeEventListener(t,e.$Listeners[t]);e.DOMResults.parentNode.removeChild(e.DOMResults)},e.merge=function(){for(var e,t={},n=0;n<arguments.length;n++)for(e in arguments[n])t[e]=arguments[n][e];return t},e.defaults={Delay:150,EmptyMessage:"No result here",Highlight:{getRegex:function(e){return new RegExp(e,"ig")},transform:function(e){return"<strong>"+e+"</strong>"}},HttpHeaders:{"Content-type":"application/x-www-form-urlencoded"},Limit:0,MinChars:0,HttpMethod:"GET",QueryArg:"q",Url:null,KeyboardMappings:{Enter:{Conditions:[{Is:13,Not:!1}],Callback:function(e){if(-1!=this.DOMResults.getAttribute("class").indexOf("open")){var t=this.DOMResults.querySelector("li.active");null!==t&&(e.preventDefault(),this._Select(t),this.DOMResults.setAttribute("class","autocomplete"))}},Operator:a.AND,Event:r.KEYDOWN},KeyUpAndDown_down:{Conditions:[{Is:38,Not:!1},{Is:40,Not:!1}],Callback:function(e){e.preventDefault()},Operator:a.OR,Event:r.KEYDOWN},KeyUpAndDown_up:{Conditions:[{Is:38,Not:!1},{Is:40,Not:!1}],Callback:function(e){e.preventDefault();var t=this.DOMResults.querySelector("li:first-child:not(.locked)"),n=this.DOMResults.querySelector("li:last-child:not(.locked)"),a=this.DOMResults.querySelector("li.active");if(a){var r=Array.prototype.indexOf.call(a.parentNode.children,a),l=r+(e.keyCode-39),o=this.DOMResults.getElementsByTagName("li").length;l<0?l=o-1:l>=o&&(l=0),a.classList.remove("active"),a.parentElement.children.item(l).classList.add("active")}else n&&38==e.keyCode?n.classList.add("active"):t&&t.classList.add("active")},Operator:a.OR,Event:r.KEYUP},AlphaNum:{Conditions:[{Is:13,Not:!0},{From:35,To:40,Not:!0}],Callback:function(){var t=this.Input.getAttribute("data-autocomplete-old-value"),n=this._Pre();""!==n&&n.length>=this._MinChars()?(t&&n==t||this.DOMResults.setAttribute("class","autocomplete open"),e.prototype.cache(this,function(e){this._Render(this._Post(e)),this._Open()}.bind(this),this._Error)):this._Close()},Operator:a.AND,Event:r.KEYUP}},DOMResults:null,Request:null,Input:null,_EmptyMessage:function(){return this.Input.hasAttribute("data-autocomplete-empty-message")?this.Input.getAttribute("data-autocomplete-empty-message"):!1!==this.EmptyMessage?this.EmptyMessage:""},_Limit:function(){var e=this.Input.getAttribute("data-autocomplete-limit");return isNaN(e)||null===e?this.Limit:parseInt(e,10)},_MinChars:function(){var e=this.Input.getAttribute("data-autocomplete-minchars");return isNaN(e)||null===e?this.MinChars:parseInt(e,10)},_Highlight:function(e){return e.replace(this.Highlight.getRegex(this._Pre()),this.Highlight.transform)},_HttpMethod:function(){return this.Input.hasAttribute("data-autocomplete-method")?this.Input.getAttribute("data-autocomplete-method"):this.HttpMethod},_QueryArg:function(){return this.Input.hasAttribute("data-autocomplete-param-name")?this.Input.getAttribute("data-autocomplete-param-name"):this.QueryArg},_Url:function(){return this.Input.hasAttribute("data-autocomplete")?this.Input.getAttribute("data-autocomplete"):this.Url},_Blur:function(e){if(void 0===e&&(e=!1),e)this._Close();else{var t=this;setTimeout(function(){t._Blur(!0)},150)}},_Cache:function(e){return this.$Cache[e]},_Focus:function(){var e=this.Input.getAttribute("data-autocomplete-old-value");(!e||this.Input.value!=e)&&this._MinChars()<=this.Input.value.length&&this.DOMResults.setAttribute("class","autocomplete open")},_Open:function(){var e=this;Array.prototype.forEach.call(this.DOMResults.getElementsByTagName("li"),function(t){"locked"!=t.getAttribute("class")&&(t.onclick=function(){e._Select(t)})})},_Close:function(){this.DOMResults.setAttribute("class","autocomplete")},_Position:function(){this.DOMResults.setAttribute("class","autocomplete"),this.DOMResults.setAttribute("style","top:"+(this.Input.offsetTop+this.Input.offsetHeight)+"px;left:"+this.Input.offsetLeft+"px;width:"+this.Input.clientWidth+"px;")},_Render:function(e){var t;t="string"==typeof e?this._RenderRaw(e):this._RenderResponseItems(e),this.DOMResults.hasChildNodes()&&this.DOMResults.removeChild(this.DOMResults.childNodes[0]),this.DOMResults.appendChild(t)},_RenderResponseItems:function(e){var t=document.createElement("ul"),n=document.createElement("li"),a=this._Limit();a<0?e=e.reverse():0===a&&(a=e.length);for(var r=0;r<Math.min(Math.abs(a),e.length);r++)n.innerHTML=e[r].Label,n.setAttribute("data-autocomplete-value",e[r].Value),t.appendChild(n),n=document.createElement("li");return t},_RenderRaw:function(e){var t=document.createElement("ul"),n=document.createElement("li");if(e.length>0)this.DOMResults.innerHTML=e;else{var a=this._EmptyMessage();""!==a&&(n.innerHTML=a,n.setAttribute("class","locked"),t.appendChild(n))}return t},_Post:function(e){try{var t=[],n=JSON.parse(e);if(0===Object.keys(n).length)return"";if(Array.isArray(n))for(var a=0;a<Object.keys(n).length;a++)t[t.length]={Value:n[a],Label:this._Highlight(n[a])};else for(var r in n)t.push({Value:r,Label:this._Highlight(n[r])});return t}catch(t){return e}},_Pre:function(){return this.Input.value},_Select:function(e){e.hasAttribute("data-autocomplete-value")?this.Input.value=e.getAttribute("data-autocomplete-value"):this.Input.value=e.innerHTML,this.Input.setAttribute("data-autocomplete-old-value",this.Input.value)},_Error:function(){},$AjaxTimer:null,$Cache:{},$Listeners:{}},e}();t.exports=l},{}]},{},[1])(1)}]);